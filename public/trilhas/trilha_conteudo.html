<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trilhas de Estudo - Koiné</title>
    <!-- <base href="/"> -->
    <link rel="icon" href="img/icon.svg" type="image/png">
    <link rel="stylesheet" href="../styles.css?v=1.1">
    <link rel="stylesheet" href="../css/homepage.css?v=1.1">
    <link rel="stylesheet" href="./css/trilha-base.css?v=1.1">
    <link rel="stylesheet" href="./css/trilha-header.css?v=1.1">
    <link rel="stylesheet" href="./css/trilha-controls.css?v=1.1">
    <link rel="stylesheet" href="./css/trilha-timeline.css?v=1.1">
    <link rel="stylesheet" href="./css/trilha-modals.css?v=1.1">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp" rel="stylesheet">
</head>
<body>
    <nav class="navbar" role="navigation" aria-label="Main navigation">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="/" class="logo-link">
                    <span class="logo-text">Κοινή</span>
                </a>
            </div>
            
            <button class="nav-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
                <span class="hamburger"></span>
                <span class="hamburger"></span>
                <span class="hamburger"></span>
            </button>
            
            <div class="nav-menu" id="nav-menu">
                
                <div class="nav-actions">
                    <div class="user-section">
                        <div class="user-profile" id="user-profile" style="display: none;">
                            <img class="user-avatar" id="user-avatar" src="" alt="User Avatar">
                            <span class="user-name" id="user-name"></span>
                            <button class="user-menu-btn" id="user-menu-btn" aria-label="Abrir menu do usuário">
                                <span class="material-symbols-sharp">expand_more</span>
                            </button>
                        </div>
                        <button class="login-button" id="login-button" aria-label="Abrir modal de login">
                            <span class="material-symbols-sharp">person</span>
                            <span>Login</span>
                        </button>
                    </div>
                    <button class="theme-switch" aria-label="Alternar tema claro/escuro">
                        <svg class="theme-icon sun" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" style="display: none;">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                        <svg class="theme-icon moon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <header class="page-header enhanced-header">
        <div class="header-content">
            <div class="header-icon-container">
                <span class="material-symbols-sharp page-icon">school</span>
                <div class="icon-glow"></div>
            </div>
            <h1>Trilhas de Estudo</h1>
            <p class="page-description">Escolha uma das trilhas de estudo abaixo para começar sua jornada no aprendizado do grego Koiné.</p>
        </div>
        
        <!-- Enhanced Study Statistics -->
        <div class="study-stats-overview" id="study-stats">
            <div class="stat-card">
                <span class="material-symbols-sharp">trending_up</span>
                <div class="stat-info">
                    <span class="stat-value" id="total-progress">0%</span>
                    <span class="stat-label">Progresso Geral</span>
                </div>
            </div>
            <div class="stat-card">
                <span class="material-symbols-sharp">schedule</span>
                <div class="stat-info">
                    <span class="stat-value" id="total-time">0 min</span>
                    <span class="stat-label">Tempo de Estudo</span>
                </div>
            </div>
            <div class="stat-card">
                <span class="material-symbols-sharp">workspace_premium</span>
                <div class="stat-info">
                    <span class="stat-value" id="completed-modules">0</span>
                    <span class="stat-label">Módulos Concluídos</span>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content enhanced-main" role="main">
        <!-- Enhanced Search and Filter -->
        <section class="trilha-controls">
            <div class="search-filter-container">
                <div class="search-box">
                    <span class="material-symbols-sharp">search</span>
                    <input type="text" id="search-trilhas" placeholder="Buscar módulos..." aria-label="Buscar módulos">
                </div>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">
                        <span class="material-symbols-sharp">apps</span>
                        Todos
                    </button>
                    <button class="filter-btn" data-filter="iniciante">
                        <span class="material-symbols-sharp">school</span>
                        Iniciante
                    </button>
                    <button class="filter-btn" data-filter="intermediario">
                        <span class="material-symbols-sharp">trending_up</span>
                        Intermediário
                    </button>
                    <button class="filter-btn" data-filter="completed">
                        <span class="material-symbols-sharp">check_circle</span>
                        Concluídos
                    </button>
                </div>
            </div>
        </section>

        <section class="trilhas-section enhanced-section">
            <div class="trilha-container" id="trilhas-container">
                <div class="trilha-timeline enhanced-timeline" id="trilha-timeline">
                    <div class="loading-trilhas enhanced-loading">
                        <div class="loading-spinner">
                            <div class="spinner-circle"></div>
                            <div class="spinner-circle"></div>
                            <div class="spinner-circle"></div>
                        </div>
                        <p>Carregando trilhas de estudo...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Study Insights Panel -->
        <section class="study-insights" id="study-insights" style="display: none;">
            <h2>Suas Estatísticas de Estudo</h2>
            <div class="insights-grid">
                <div class="insight-card">
                    <h3>Progresso Semanal</h3>
                    <div class="weekly-progress" id="weekly-progress">
                        <!-- Progress chart will be generated here -->
                    </div>
                </div>
                <div class="insight-card">
                    <h3>Tópicos Favoritos</h3>
                    <div class="favorite-topics" id="favorite-topics">
                        <!-- Favorite topics will be listed here -->
                    </div>
                </div>
                <div class="insight-card">
                    <h3>Próximas Recomendações</h3>
                    <div class="recommendations" id="recommendations">
                        <!-- AI recommendations for premium users -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Enhanced Module Info Modal -->
    <div class="modal enhanced-modal" id="moduloInfoModal" style="display: none;" aria-hidden="true">
        <div class="modal-content modulo-info-content">
            <button class="close-modal" aria-label="Fechar modal">&times;</button>
            <div class="modal-header">
                <div class="module-icon-container">
                    <span class="material-symbols-sharp" id="modal-module-icon">school</span>
                </div>
                <h2 id="modulo-info-titulo">Título do Módulo</h2>
            </div>
            
            <div class="modal-body">
                <div class="modulo-descricao" id="modulo-info-descricao">
                    Descrição do módulo aparecerá aqui.
                </div>
                
                <div class="modulo-stats enhanced-stats">
                    <div class="stat-item">
                        <span class="material-symbols-sharp">assignment</span>
                        <div class="stat-content">
                            <span id="modulo-info-atividades">0 atividades</span>
                            <small>Atividades disponíveis</small>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="material-symbols-sharp">schedule</span>
                        <div class="stat-content">
                            <span id="modulo-info-tempo">15 min</span>
                            <small>Tempo estimado</small>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="material-symbols-sharp">trending_up</span>
                        <div class="stat-content">
                            <span id="modulo-info-nivel">Iniciante</span>
                            <small>Nível de dificuldade</small>
                        </div>
                    </div>
                </div>

                <div class="progress-preview" id="progress-preview" style="display: none;">
                    <h4>Seu Progresso</h4>
                    <div class="progress-bar-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="modal-progress-fill"></div>
                        </div>
                        <span class="progress-text" id="modal-progress-text">0%</span>
                    </div>
                    <div class="activity-list" id="activity-list">
                        <!-- Activity progress will be shown here -->
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <div class="modulo-acoes">
                    <button id="modulo-iniciar" class="modulo-acao-btn primary enhanced-btn">
                        <span class="material-symbols-sharp">play_arrow</span> 
                        <span class="btn-text">Iniciar módulo</span>
                    </button>
                    <button id="modulo-reset" class="modulo-acao-btn secondary" style="display: none;">
                        <span class="material-symbols-sharp">refresh</span> 
                        Reiniciar progresso
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="../app.js?v=1.1"></script>
    <!-- <script type="module" src="indexedDB.js?v=1.1"></script> -->
    <!-- <script type="module" src="../progress-manager.js?v=1.1"></script> -->
    <script type="module" src="../trilhas/app.js?v=1.1"></script>
    <script>
        // Mobile navigation toggle
        document.addEventListener('DOMContentLoaded', function() {
            const navToggle = document.querySelector('.nav-toggle');
            const navMenu = document.querySelector('.nav-menu');
            
            navToggle.addEventListener('click', function() {
                navMenu.classList.toggle('active');
                const isExpanded = navToggle.getAttribute('aria-expanded') === 'true';
                navToggle.setAttribute('aria-expanded', !isExpanded);
                document.body.classList.toggle('nav-open');
            });
            
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.navbar')) {
                    navMenu.classList.remove('active');
                    navToggle.setAttribute('aria-expanded', 'false');
                    document.body.classList.remove('nav-open');
                }
            });
            
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    navMenu.classList.remove('active');
                    navToggle.setAttribute('aria-expanded', 'false');
                    document.body.classList.remove('nav-open');
                }
            });
        });
    </script>
</body>
</html>